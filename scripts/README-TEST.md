# 法国用户旅程自动化测试

## 概述

这个测试脚本模拟法国客户的完整用户旅程，从注册、登录、定价、提取、评论到付款，验证所有按钮和界面元素是否正确显示为法语。

## 测试步骤

1. **访问首页并切换到法语** - 验证 URL 和导航菜单
2. **访问注册页面** - 验证注册表单的法语文本
3. **访问登录页面** - 验证登录表单的法语文本
4. **访问定价页面** - 验证定价页面的法语文本和按钮
5. **访问字幕提取页面** - 验证提取功能的法语文本
6. **访问评论/反馈页面** - 验证评论表单的法语文本
7. **检查付款相关按钮** - 验证付款流程的法语文本

## 安装依赖

```bash
npm install --save-dev playwright @types/node
npx playwright install chromium
```

## 运行测试

### 有界面模式（推荐，可以看到浏览器操作）

```bash
npm run test:french
```

### 无界面模式（更快）

```bash
npm run test:french:headless
```

### 自定义测试 URL

```bash
TEST_BASE_URL=http://localhost:3000 npm run test:french
```

## 测试报告

测试完成后，会在 `test-reports/` 目录下生成：

1. **JSON 格式报告** - `french-user-journey-test-{timestamp}.json`
2. **Markdown 格式报告** - `french-user-journey-test-{timestamp}.md`
3. **截图** - 保存在 `test-screenshots/` 目录

## 报告内容

测试报告包含：

- ✅ **测试摘要** - 总步骤数、通过/失败/跳过数量
- 📊 **法语本地化测试** - 法语文本检查结果
- 🚀 **用户旅程测试** - 页面导航和功能测试结果
- 📸 **截图** - 每个步骤的页面截图
- ⚠️ **问题列表** - 发现的英语文本（不应该出现）

## 示例报告

```markdown
# 法国用户旅程测试报告

## 测试摘要
- **总步骤数**: 7
- **通过**: 6 ✅
- **失败**: 1 ❌
- **跳过**: 0 ⏭️

### 法语本地化测试
- **总数**: 7
- **通过**: 6 ✅
- **失败**: 1 ❌
```

## 注意事项

1. 确保开发服务器正在运行（`npm run dev`）
2. 测试会打开浏览器窗口（除非使用 headless 模式）
3. 测试可能需要几分钟时间完成
4. 如果测试失败，检查截图和报告中的详细信息

## 故障排除

### Playwright 未安装

```bash
npx playwright install chromium
```

### 端口被占用

确保 `localhost:3000` 可用，或使用 `TEST_BASE_URL` 环境变量指定其他 URL。

### 测试超时

如果测试超时，可以增加等待时间或检查网络连接。

